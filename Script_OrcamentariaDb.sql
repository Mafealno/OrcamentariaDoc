-- MySQL Script generated by MySQL Workbench
-- Thu Feb 13 17:59:57 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema OrcamentariaDB
-- -----------------------------------------------------
-- Este banco de dados é responsavel por armazenar todos os dados do sistema Orcamentaria.

-- -----------------------------------------------------
-- Schema OrcamentariaDB
--
-- Este banco de dados é responsavel por armazenar todos os dados do sistema Orcamentaria.
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `OrcamentariaDB` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_bin ;
USE `OrcamentariaDB` ;

-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_PESSOA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_PESSOA` (
  `PESSOA_ID` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(60) NOT NULL,
  `RG` VARCHAR(9) NULL,
  `CPF` VARCHAR(11) NULL,
  `CNPJ` VARCHAR(14) NULL,
  `TIPO_CADASTRO` VARCHAR(20) NOT NULL,
  `TIPO_PESSOA` ENUM('F', 'J') NOT NULL,
  PRIMARY KEY (`PESSOA_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_ENDERECO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_ENDERECO` (
  `ENDERECO_ID` INT NOT NULL AUTO_INCREMENT,
  `LOGRADOURO` VARCHAR(100) NOT NULL,
  `CEP` VARCHAR(9) NULL,
  `NUMERO_ENDERECO` VARCHAR(10) NULL,
  `COMPLEMENTO` VARCHAR(40) NULL,
  `BAIRRO` VARCHAR(40) NOT NULL,
  `CIDADE` VARCHAR(40) NULL,
  `ESTADO` VARCHAR(40) NOT NULL,
  `ENDERECO_PADRAO` BIT NOT NULL DEFAULT 0,
  `FK_PESSOA_ID` INT NOT NULL,
  PRIMARY KEY (`ENDERECO_ID`),
  INDEX `fk_T_ORCA_ENDERECO_T_ORCA_PESSOA1_idx` (`FK_PESSOA_ID` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_ENDERECO_T_ORCA_PESSOA1`
    FOREIGN KEY (`FK_PESSOA_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_PESSOA` (`PESSOA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_CONTATO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_CONTATO` (
  `CONTATO_ID` INT NOT NULL AUTO_INCREMENT,
  `TIPO_CONTATO` VARCHAR(15) NOT NULL,
  `CONTATO` VARCHAR(30) NOT NULL,
  `DDD` VARCHAR(2) NULL,
  `RAMAL` VARCHAR(10) NULL,
  `CONTATO_PADRAO` BIT NOT NULL DEFAULT 0,
  `FK_PESSOA_ID` INT NOT NULL,
  PRIMARY KEY (`CONTATO_ID`),
  INDEX `fk_T_ORCA_CONTATO_T_ORCA_PESSOA1_idx` (`FK_PESSOA_ID` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_CONTATO_T_ORCA_PESSOA1`
    FOREIGN KEY (`FK_PESSOA_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_PESSOA` (`PESSOA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_FUNCIONARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_FUNCIONARIO` (
  `FUNCIONARIO_ID` INT NOT NULL AUTO_INCREMENT,
  `CARGO_FUNCIONARIO` VARCHAR(20) NOT NULL,
  `DATA_ADMISSAO` DATETIME NOT NULL,
  `VALOR_DIA_TRABALHADO` REAL NOT NULL,
  `STATUS_FUNCIONARIO` ENUM('ATIVO', 'NAO_ATIVO') NOT NULL,
  `FK_PESSOA_ID` INT NOT NULL,
  PRIMARY KEY (`FUNCIONARIO_ID`),
  INDEX `fk_T_ORCA_FUNCIONARIO_T_ORCA_PESSOA1_idx` (`FK_PESSOA_ID` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_FUNCIONARIO_T_ORCA_PESSOA`
    FOREIGN KEY (`FK_PESSOA_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_PESSOA` (`PESSOA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_CUSTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_CUSTO` (
  `CUSTO_ID` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(30) NOT NULL,
  `DESCRICAO` VARCHAR(100) NULL,
  `TIPO_CUSTO` ENUM('DIARIO', 'SEMANAL', 'MENSAL', 'ANUAL', 'UNICO') NULL,
  `VALOR_CUSTO` REAL NOT NULL,
  PRIMARY KEY (`CUSTO_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_MATERIAL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_MATERIAL` (
  `MATERIAL_ID` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(50) NOT NULL,
  `DESCRICAO` VARCHAR(100) NULL,
  `TIPO` VARCHAR(20) NOT NULL,
  `FK_FABRICANTE` INT NOT NULL,
  PRIMARY KEY (`MATERIAL_ID`),
  INDEX `fk_T_ORCA_MATERIAL_T_ORCA_PESSOA1_idx` (`FK_FABRICANTE` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_MATERIAL_T_ORCA_PESSOA1`
    FOREIGN KEY (`FK_FABRICANTE`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_PESSOA` (`PESSOA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_EQUIPAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_EQUIPAMENTO` (
  `EQUIPAMENTO_ID` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(50) NOT NULL,
  `DESCRICAO` VARCHAR(100) NULL,
  `FK_FABRICANTE` INT NOT NULL,
  PRIMARY KEY (`EQUIPAMENTO_ID`),
  INDEX `fk_T_ORCA_EQUIPAMENTO_T_ORCA_PESSOA1_idx` (`FK_FABRICANTE` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_EQUIPAMENTO_T_ORCA_PESSOA1`
    FOREIGN KEY (`FK_FABRICANTE`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_PESSOA` (`PESSOA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_ORCAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_ORCAMENTO` (
  `ORCAMENTO_ID` INT NOT NULL AUTO_INCREMENT,
  `NOME_OBRA` VARCHAR(30) NOT NULL,
  `REFERENCIA` VARCHAR(50) NULL,
  `PRAZO_ENTREGA` VARCHAR(4) NOT NULL,
  `DATA_CRIACAO_ORCAMENTO` DATETIME NOT NULL,
  `A_C` VARCHAR(60) NULL,
  PRIMARY KEY (`ORCAMENTO_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_TOTAIS_ORCAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_TOTAIS_ORCAMENTO` (
  `TOTAIS_ID` INT NOT NULL AUTO_INCREMENT,
  `TOTAIS_ITENS` REAL NOT NULL,
  `TOTAIS_MAO_OBRA` REAL NOT NULL,
  `TOTAIS_EQUIPAMENTOS` REAL NOT NULL,
  `TOTAIS_CUSTOS` REAL NOT NULL,
  `TOTAL_GERAL` REAL NOT NULL,
  `FK_ORCAMENTO_ID` INT NOT NULL,
  PRIMARY KEY (`TOTAIS_ID`, `FK_ORCAMENTO_ID`),
  INDEX `fk_T_ORCA_TOTAIS_ORCAMENTO_T_ORCA_ORCAMENTO1_idx` (`FK_ORCAMENTO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_TOTAIS_ORCAMENTO_T_ORCA_ORCAMENTO1`
    FOREIGN KEY (`FK_ORCAMENTO_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_ORCAMENTO` (`ORCAMENTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_ITENS_ORCAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_ITENS_ORCAMENTO` (
  `ITENS_ORCAMENTO_ID` INT NOT NULL,
  `AMBIENTE_APLICACAO` VARCHAR(40) NOT NULL,
  `AREA_APLICACAO` VARCHAR(40) NULL,
  `VALOR_UNITARIO_PRODUTO` REAL NOT NULL,
  `QTDE_PRODUTO_APLICACAO` DECIMAL(18,5) NOT NULL,
  `FK_PRODUTO` INT NOT NULL,
  `FK_ORCAMENTO_ID` INT NOT NULL,
  PRIMARY KEY (`ITENS_ORCAMENTO_ID`, `FK_PRODUTO`, `FK_ORCAMENTO_ID`),
  INDEX `fk_T_ORCA_ITENS_ORCAMENTO_T_ORCA_MATERIAL1_idx` (`FK_PRODUTO` ASC) VISIBLE,
  INDEX `fk_T_ORCA_ITENS_ORCAMENTO_T_ORCA_ORCAMENTO1_idx` (`FK_ORCAMENTO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_ITENS_ORCAMENTO_T_ORCA_MATERIAL1`
    FOREIGN KEY (`FK_PRODUTO`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_MATERIAL` (`MATERIAL_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ORCA_ITENS_ORCAMENTO_T_ORCA_ORCAMENTO1`
    FOREIGN KEY (`FK_ORCAMENTO_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_ORCAMENTO` (`ORCAMENTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_EQUIPAMENTO_ORCAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_EQUIPAMENTO_ORCAMENTO` (
  `EQUIPAMENTO_ORCAMENTO_ID` INT NOT NULL,
  `VALOR_UNITARIO_EQUIPAMENTO` REAL NOT NULL,
  `QTDE_EQUIPAMENTO` DECIMAL(18,5) NOT NULL,
  `FK_ORCAMENTO_ID` INT NOT NULL,
  `FK_EQUIPAMENTO` INT NOT NULL,
  PRIMARY KEY (`EQUIPAMENTO_ORCAMENTO_ID`, `FK_EQUIPAMENTO`),
  INDEX `fk_T_ORCA_EQUIPAMENTO_ORCAMENTO_T_ORCA_ORCAMENTO1_idx` (`FK_ORCAMENTO_ID` ASC) VISIBLE,
  INDEX `fk_T_ORCA_EQUIPAMENTO_ORCAMENTO_T_ORCA_EQUIPAMENTO1_idx` (`FK_EQUIPAMENTO` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_EQUIPAMENTO_ORCAMENTO_T_ORCA_ORCAMENTO1`
    FOREIGN KEY (`FK_ORCAMENTO_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_ORCAMENTO` (`ORCAMENTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ORCA_EQUIPAMENTO_ORCAMENTO_T_ORCA_EQUIPAMENTO1`
    FOREIGN KEY (`FK_EQUIPAMENTO`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_EQUIPAMENTO` (`EQUIPAMENTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_CUSTO_ORCAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_CUSTO_ORCAMENTO` (
  `CUSTO_ORCAMENTO_ID` INT NOT NULL,
  `FK_CUSTO_ID` INT NOT NULL,
  `FK_ORCAMENTO_ID` INT NOT NULL,
  PRIMARY KEY (`CUSTO_ORCAMENTO_ID`, `FK_CUSTO_ID`),
  INDEX `fk_T_ORCA_CUSTO_ORCAMENTO_T_ORCA_CUSTO1_idx` (`FK_CUSTO_ID` ASC) VISIBLE,
  INDEX `fk_T_ORCA_CUSTO_ORCAMENTO_T_ORCA_ORCAMENTO1_idx` (`FK_ORCAMENTO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_CUSTO_ORCAMENTO_T_ORCA_CUSTO1`
    FOREIGN KEY (`FK_CUSTO_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_CUSTO` (`CUSTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ORCA_CUSTO_ORCAMENTO_T_ORCA_ORCAMENTO1`
    FOREIGN KEY (`FK_ORCAMENTO_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_ORCAMENTO` (`ORCAMENTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_MAO_OBRA_ORCAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_MAO_OBRA_ORCAMENTO` (
  `MAO_OBRA_ORCAMENTO_ID` INT NOT NULL AUTO_INCREMENT,
  `DIAS_DE_TRABALHO` INT NOT NULL,
  `FK_CUSTOS_FUNCIONARIO` INT NOT NULL,
  `FK_FUNCIONARIO` INT NOT NULL,
  PRIMARY KEY (`MAO_OBRA_ORCAMENTO_ID`, `FK_FUNCIONARIO`),
  INDEX `fk_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_CUSTO1_idx` (`FK_CUSTOS_FUNCIONARIO` ASC) VISIBLE,
  INDEX `fk_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_PESSOA1_idx` (`FK_FUNCIONARIO` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_CUSTO1`
    FOREIGN KEY (`FK_CUSTOS_FUNCIONARIO`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_CUSTO` (`CUSTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_PESSOA1`
    FOREIGN KEY (`FK_FUNCIONARIO`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_PESSOA` (`PESSOA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `OrcamentariaDB`.`T_ORCA_OBRA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `OrcamentariaDB`.`T_ORCA_OBRA` (
  `T_ORCA_ORCAMENTO_ID` INT NOT NULL,
  `T_ORCA_MAO_OBRA_ORCAMENTO_ID` INT NOT NULL,
  PRIMARY KEY (`T_ORCA_ORCAMENTO_ID`, `T_ORCA_MAO_OBRA_ORCAMENTO_ID`),
  INDEX `fk_T_ORCA_ORCAMENTO_has_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_MA_idx` (`T_ORCA_MAO_OBRA_ORCAMENTO_ID` ASC) VISIBLE,
  INDEX `fk_T_ORCA_ORCAMENTO_has_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_OR_idx` (`T_ORCA_ORCAMENTO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_T_ORCA_ORCAMENTO_has_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_ORCA1`
    FOREIGN KEY (`T_ORCA_ORCAMENTO_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_ORCAMENTO` (`ORCAMENTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ORCA_ORCAMENTO_has_T_ORCA_MAO_OBRA_ORCAMENTO_T_ORCA_MAO_1`
    FOREIGN KEY (`T_ORCA_MAO_OBRA_ORCAMENTO_ID`)
    REFERENCES `OrcamentariaDB`.`T_ORCA_MAO_OBRA_ORCAMENTO` (`MAO_OBRA_ORCAMENTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

